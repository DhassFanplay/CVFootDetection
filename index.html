<!DOCTYPE html>
<html lang="en-us">
<head>
  <meta charset="utf-8" />
  <title>WebGLFootBall AR</title>
  <meta
    name="viewport"
    content="width=device-width,height=device-height,initial-scale=1.0,user-scalable=no"
  />
  <style>
    body { margin:0; padding:0; overflow:hidden; background:#000; }
    #unity-container { position:relative; width:100vw; height:100vh; }
    #unity-canvas { width:100%; height:100%; background:#000; display:block; }
    /* video sits *under* Unity so Unity content draws on top */
    #video {
      position:absolute; top:0; left:0;
      width:100vw; height:100vh;
      object-fit:cover;
      z-index:0;
    }
    /* Unity canvas sits above */
    #unity-canvas { position:absolute; top:0; left:0; z-index:1; }
    /* UI on top of everything */
    #captureButton, #status {
      position:absolute; z-index:2;
      color:#fff; font-family:sans-serif;
    }
    #captureButton {
      bottom:30px; left:50%; transform:translateX(-50%);
      padding:12px 24px; background:#00aaff; border:none;
      border-radius:6px; cursor:pointer; font-size:18px;
    }
    #status {
      top:20px; right:20px; padding:8px 12px;
      background:rgba(0,0,0,0.6); border-radius:4px;
      font-size:14px;
    }
  </style>
</head>
<body>
  <!-- camera preview UNDER the Unity canvas -->
  <video id="video" autoplay muted playsinline></video>

  <!-- Unity WebGL -->
  <div id="unity-container">
    <canvas id="unity-canvas"></canvas>
  </div>

  <!-- UI on top -->
  <button id="captureButton">Capture Foot</button>
  <div id="status">Waitingâ€¦</div>

  <!-- OpenCV.js + app JS -->
  <script async src="https://docs.opencv.org/4.9.0/opencv.js"></script>
  <script type="module" src="OnlyOpenCV.js"></script>

  <!-- Unity loader -->
  <script>
    const buildUrl  = "Build",
          loaderUrl = buildUrl + "/CVFootDetection.loader.js",
          config    = {
            dataUrl:      buildUrl + "/CVFootDetection.data",
            frameworkUrl: buildUrl + "/CVFootDetection.framework.js",
            codeUrl:      buildUrl + "/CVFootDetection.wasm",
            streamingAssetsUrl: "StreamingAssets",
            companyName:  "DefaultCompany",
            productName:  "WebGLFootBall",
            productVersion: "0.1"
          };

    const s = document.createElement("script");
    s.src = loaderUrl;
    s.onload = () => {
      createUnityInstance(
        document.querySelector("#unity-canvas"),
        config,
        prog => {/* could show a progress bar */}
      ).then(ui => window.unityInstance = ui)
       .catch(err => alert(err));
    };
    document.body.append(s);
  </script>
</body>
</html>
